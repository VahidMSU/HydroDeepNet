{% extends "layout.html" %}

{% block title %}Visualizations Dashboard{% endblock %}

{% block content %}
<main class="container my-5">
    <h1 class="text-center mb-4">Visualizations Dashboard</h1>


    <!-- Visualization Form Section -->
    <section aria-labelledby="form-title">
        <h2 id="form-title" class="visually-hidden">Visualization Input Form</h2>
        <form id="visualization_form" class="border p-4 rounded shadow-sm bg-light" method="GET"
            action="{{ url_for('visualizations') }}">
            <div class="row g-3">
                <!-- Watershed Name Dropdown -->
                <div class="col-md-6">
                    <label for="NAME" class="form-label">Watershed Name</label>
                    <select name="NAME" id="NAME" class="form-select" aria-required="true" required>
                        <option value="">Select a Watershed</option>
                    </select>
                </div>

                <!-- Version Input -->
                <div class="col-md-6">
                    <label for="ver" class="form-label">Version</label>
                    <input type="text" name="ver" id="ver" class="form-control" placeholder="Enter version (e.g., v1)"
                        aria-required="true" required>
                </div>
            </div>

            <div class="row g-3 mt-3">
                <!-- Variable Dropdown -->
                <div class="col-md-12">
                    <label for="variable" class="form-label">Variable Name</label>
                    <select name="variable" id="variable" class="form-select" aria-multiselectable="true" multiple>
                        <!-- Options populated dynamically -->
                    </select>
                    <small id="variable-help" class="form-text text-muted">
                        Hold Ctrl/Cmd to select multiple variables.
                    </small>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="text-center mt-4">
                <button type="button" class="btn btn-primary btn-lg px-4" id="show_visualizations"
                    aria-label="Show visualizations">
                    <i class="fas fa-chart-bar me-2" aria-hidden="true"></i> Show Visualizations
                </button>
            </div>
        </form>
    </section>

    <!-- Error Message Section -->
    <section aria-live="polite" aria-atomic="true" class="mt-3">
        <div id="error_message" class="alert alert-danger d-none text-center" role="alert"></div>
    </section>

    <!-- Visualization Results Section -->
    <section id="visualization_results" class="mt-5 d-none" aria-labelledby="results-title">
        <h2 id="results-title" class="text-center mb-4">Spatiotemporal Animations (GIFs)</h2>
        <div id="gif_container" class="d-flex flex-wrap justify-content-center gap-4">
            <!-- GIF Images will be inserted dynamically -->
        </div>
    </section>
</main>

<!-- External CSS and JS -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='css/visualization_style.css') }}">
<script src="{{ url_for('static', filename='js/visualization_script.js') }}" defer></script>
{% endblock %}